<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'core/css/index.css' %}">
    <script>
      $(document).ready(
        function () {
          $("#msj-error").hide();
          if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(obtenerPosicion);
          } else {
            $("#msj-error").show();
            $("#msj-error").append(
              `<p1>No se ha podido encontrar tu ubicación</p>`
            )
          }
          function obtenerPosicion (position) {
            var latitud = position.coords.latitude;
            var longitud = position.coords.longitude;

            var url = `https://www.metaweather.com/api/location/search/?lattlong=${latitud},${longitud}`;
            $.get(url, function (data) {
              var nombreLugar = data[0].title;
              var whereOnEarthId = data[0].woeid;
              var urlTemp = `https://www.metaweather.com/api/location/${whereOnEarthId}/`;

              $.get(urlTemp, function (data) {
                var tiempoEnTuZona = data.consolidated_weather[1].the_temp.toFixed(1);
                var nombreAbbrClima = data.consolidated_weather[1].weather_state_abbr;
                var nombreClima = data.consolidated_weather[1].weather_state_name;
                
                obtenerIcon(nombreAbbrClima);

                $("#temp").append(`<p>${tiempoEnTuZona}&#8451;</p>`)

                //traducir nombre-clima
                const arrNombresClima = ["Snow", "Sleet", "Hail", "Thunderstorm", "Heavy Rain", "Light Rain", "Showers", "Heavy Cloud", "Light Cloud", "Clear"];
                const arrNombreClimaEs = ["nieve", "Aguanieve", "Granizo", "Tormenta", "Lluvia pesada", "Lluvia ligera", "Chubascos", "Nubes pesadas", "Nublado","Despejado"];

                if (arrNombresClima.includes(nombreClima)) {
                  const indiceNombreEn = arrNombresClima.indexOf(nombreClima);
                  const nombreClimaEs = arrNombreClimaEs[indiceNombreEn]; 
                  $("#climaNombre").append(`<p>${nombreClimaEs}</p>`);
                }

              })
            })
          function obtenerIcon (nombreAbbrClima) {
            arrClima = ['sn', 'sl', 'h', 't', 'hr', 'lr', 's', 'hc', 'lc', 'c'];
            if (arrClima.includes(nombreAbbrClima)) {
              const url = `https://www.metaweather.com/static/img/weather/${nombreAbbrClima}.svg`;
              //implementar icono
              $("#icon").append(`<img src="${url}" class="img-icon"/>`);
            }
          }
          }
        }
      )
    </script>
    <title>El Rayo McQueen</title>
  </head>
  <body>
  <!-- HEADER -->
  <header>
    <nav id="header"class="navbar navbar-personalizado navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
          <a href=""><img src="../../assets/img/icon/logo-solido.svg" alt="" class=" logo"></a>
          <a class="navbar-brand" href="#">
            <h1 class="me-5">EL RAYO<br>MCQUEEN</br></h1>
          </a>
          <button class="navbar-toggler btn-carousel" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <img src="../../assets/toggle-button.svg" ></img>
          </button>
          <div class="collapse navbar-collapse bg-black" id="navbar">
            <ul class="navbar-nav text-center d-flex align-items-center ms-auto">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="#">INICIO</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./pages/quienessomos/quienesSomos.html">¿QUIÉNES SOMOS?</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./pages/mecanicos/mecanicos.html">MECÁNICOS</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">TRABAJOS REALIZADOS</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./pages/contacto/contacto.html">CONTACTO</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="./pages/busquedas/busquedas.html">BÚSQUEDAS</a>
              </li>
            </ul>
            <div class="btn-actions mb-5 d-flex justify-content-sm-center justify-content-md-center justify-content-lg-end justify-content-center align-items-end">
              <button class="btn btn-registrate  me-4">Regístrate</button>
              <button class="btn btn-inicie-sesion">Inicie sesión</button>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <!-- /HEADER -->
    <!-- BUSQUEDA -->
    <section class="main-input">
      <div class="container-fluid container-busqueda d-flex justify-content-center mb-5">
        <div class="row">
          <div class="col-12 col-lg">
            <div class="barra-busqueda mt-4">
                <input id="search-id" type="text" class="input-search" name="search-id" placeholder="Escriba lo que desee buscar..."/>
              </div>
              <div class="container-fluid d-flex justify-content-center">
                <button type="submit" class="btn btn-search d-flex align-items-center justify-content-center mt-5">
                  <img src="./assets/img/icon/search-icon.svg" class="search-icon"/> Buscar
                </button>

              </div>
            </div>
            
          
        </div>
      </div>
    </section>
    <!-- /BUSQUEDA -->
    <!-- TITULO MAIN -->
    <div class="container container-titulo">
      <h1>TRABAJOS DESTACADOS</h1>
    </div>
    <!-- /TITULO MAIN -->
    <!-- MAIN -->
    <main id="main">
      <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false" data-bs-pause= "hover">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="./assets/img/carrusel/foto1.jpg" class="" alt="...">
            <div class="container mt-5">
              <div class="row">
                <div class="col-12 col-lg container-informacion-trabajo">
                  
                  <p>Tipo de trabajo: Cambio de radiador</p>
                  <p>Mecánico: Tomás Faúndez</p>
                  <p>Vehículo: Mazda 4</p>
                  <button class="btn btn-mas-info">Más información</button>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <img src="./assets/img/carrusel/foto2.jpg" class="" alt="...">
            <div class="container mt-5">
              <div class="row">
                <div class="col-12 col-lg container-informacion-trabajo">
                  <p>Tipo de trabajo: Cambio de pistónes</p>
                  <p>Mecánico: Oscar Martínez</p>
                  <p>Vehículo: Toyota Yaris</p>
                  <button class="btn btn-mas-info">Más información</button>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <img src="./assets/img/carrusel/foto3.jpg" class="" alt="...">
            <div class="container mt-5">
              <div class="row ">
                <div class="col-12 col-lg container-informacion-trabajo">
                  <p>Tipo de trabajo: Lubricación</p>
                  <p>Mecánico: Jorge Moforte</p>
                  <p>Vehículo: Kía Río</p>
                  <button class="btn btn-mas-info">Más información</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      
    </main>
    <!-- /MAIN -->
    <!-- FOOTER -->
    <footer id="footer">
      <div class="container-fluid container-footer">
        <div class="row information">
          <div class="col-12 col-lg-1 text-center mt-5">
            <a href="#">¿Quiénes somos?</a>
          </div>
          <div class="col-12 col-lg-1 text-center mt-5">
            <a href="#">Mecánicos</a>
          </div>
          <div class="col-12 col-lg-1 text-center  mt-5">
            <a href="#">Trabajos realizados</a>
          </div>
          <div class="col-12 col-lg-1 text-center mt-5">
            <a href="#">Contacto</a>
          </div>
          <div class="col-12 col-lg-1 text-center mt-5">
            <a href="#">Términos y condiciones</a>
          </div>
          <div class="col-12 text-center col-lg offset-lg-6 mt-3 pe-3 container-clima" id="clima">
            <div class="icon-clima" id="icon"></div>
            <div class="container-info-clima">
              <div class="temperatura" id="temp"></div>
              <div class="nombre-clima" id="climaNombre"></div>
            </div>
            <div id="msj-error" class="container alert red-alert"></div>
          </div>
        </div>
      </div>
      <div class="container-fluid foot"></div>
    </footer>
    <!-- /FOOTER -->

    

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
  </body>
</html>